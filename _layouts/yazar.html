---
layout: default
---
<article class="content-container">
  <!-- Back button with improved styling -->
  <div style="margin:1.5rem 0;">
    <a href="{{ '/yazarlar/' | relative_url }}" class="btn secondary-btn" style="display:inline-flex; align-items:center; gap:0.5rem; background-color:#f8f9fa; color:#0066cc; border:1px solid #e5e7eb; padding:0.5rem 1rem;">
      <i class="fas fa-arrow-left" aria-hidden="true"></i>
      <span>Yazarlar listesine dön</span>
    </a>
  </div>

  <!-- Author profile header with improved layout -->
  <div style="display:flex; flex-wrap:wrap; align-items:center; gap:2rem; margin-bottom:2rem; padding-bottom:0.5rem;">
    <!-- Author image with existing CSS class -->
    {%- assign default_img = '/assets/img/yazarlar/' | append: page.author_slug | append: '.png' -%}
    <div class="author-headshot" style="flex-shrink:0;">
      <img src="{{ default_img | relative_url }}" alt="{{ page.author_slug }}" loading="lazy"
          onerror="this.closest('.author-headshot').classList.add('no-image'); this.remove();"
          style="border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.1);">
      <div class="headshot-fallback"><i class="fas fa-user"></i></div>
    </div>
    
    <!-- Author info with better typography -->
    <div style="flex:1; min-width:250px;">
      <h1 style="margin:0 0 0.75rem 0; font-size:2.4rem; color:#222;">{{ page.author }}</h1>
      
      <!-- Author stats summary -->
      {% assign data = site.data.yazarlar[page.author_slug] %}
      {% if data %}
        <div style="display:flex; flex-wrap:wrap; gap:1rem; margin-top:1rem;">
          <!-- Number of works -->
          <div style="background:#fff; border:1px solid #e5e7eb; border-radius:8px; padding:0.75rem 1.25rem; min-width:120px; box-shadow:0 2px 4px rgba(0,0,0,0.05);">
            <div style="font-size:1.5rem; font-weight:bold; color:#0066cc;">{{ page.titles.size }}</div>
            <div style="font-size:0.9rem; color:#666;">Eser</div>
          </div>
          
          <!-- Calculate total words -->
          {% assign total_words = 0 %}
          {% for word_count in data %}
            {% if word_count[0] != "metadata" %}
              {% assign total_words = total_words | plus: word_count[1] %}
            {% endif %}
          {% endfor %}
          
          <!-- Total words card -->
          <div style="background:#fff; border:1px solid #e5e7eb; border-radius:8px; padding:0.75rem 1.25rem; min-width:120px; box-shadow:0 2px 4px rgba(0,0,0,0.05);">
            <div style="font-size:1.5rem; font-weight:bold; color:#0066cc;">{{ total_words | divided_by: 1000 }}K+</div>
            <div style="font-size:0.9rem; color:#666;">Kelime</div>
          </div>
          
          <!-- Unique words card -->
          <div style="background:#fff; border:1px solid #e5e7eb; border-radius:8px; padding:0.75rem 1.25rem; min-width:120px; box-shadow:0 2px 4px rgba(0,0,0,0.05);">
            <div style="font-size:1.5rem; font-weight:bold; color:#0066cc;">{{ data | size }}</div>
            <div style="font-size:0.9rem; color:#666;">Benzersiz Kelime</div>
          </div>
        </div>
      {% endif %}
    </div>
  </div>

  <!-- Processed date with better styling -->
  {% assign data = site.data.yazarlar[page.author_slug] %}
  {% if data and data.metadata and data.metadata.processed_at %}
    <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #eee; padding-bottom: 1rem;">
      <p style="margin:0; font-size:0.9rem; color:#666; display:flex; align-items:center; gap:0.5rem;">
        <i class="fas fa-clock"></i>
        <em>Veri işlenme tarihi:</em> {{ data.metadata.processed_at }}
      </p>
    </div>
  {% endif %}

  <!-- List of works with improved styling -->
  {% if page.titles and page.titles.size > 0 %}
    <section style="margin:2rem 0; padding:1.5rem; background:#fff; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.05);">
      <h2 style="margin-top:0; display:flex; align-items:center; gap:0.5rem;">
        <i class="fas fa-book" style="color:#0066cc;"></i>
        Analiz Edilen Eserler
      </h2>
      
      <div style="display:grid; grid-template-columns:repeat(auto-fill, minmax(200px, 1fr)); gap:1rem; margin-top:1.25rem;">
        {% for title in page.titles %}
          <div style="background:#f8f9fa; border:1px solid #e5e7eb; border-radius:8px; padding:1rem; display:flex; align-items:center; gap:0.75rem;">
            <i class="fas fa-caret-right" style="color:#0066cc; font-size:1.25rem;"></i>
            <span style="font-weight:500;">{{ title }}</span>
          </div>
        {% endfor %}
      </div>
    </section>
  {% endif %}

  <!-- Chart section with tabs -->
  <section style="margin:2rem 0; padding:1.5rem; background:#fff; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.05);">
    <h2 style="margin-top:0; display:flex; align-items:center; gap:0.5rem;">
      <i class="fa-solid fa-chart-simple" style="color:#0066cc;"></i>
      Yazar İstatistikleri
    </h2>
    
    <!-- Visualization controls -->
    <div style="display:flex; flex-wrap:wrap; justify-content:space-between; align-items:center; margin:1.25rem 0; gap:1rem;">
      <!-- Tabs -->
      <div style="display:flex; border:1px solid #e5e7eb; border-radius:6px; overflow:hidden;">
        <button id="tab-word" class="viz-tab active" style="padding:0.5rem 1rem; background:none; border:none; cursor:pointer; font-weight:500;">Kelime</button>
        <button id="tab-char" class="viz-tab" style="padding:0.5rem 1rem; background:none; border:none; cursor:pointer; font-weight:500;">Harf</button>
        <button id="tab-bpe" class="viz-tab" style="padding:0.5rem 1rem; background:none; border:none; cursor:pointer; font-weight:500;">BPE</button>
      </div>
      
      <!-- Options -->
      <div style="display:flex; align-items:center; gap:1rem;">
        <label style="display:flex; align-items:center; gap:0.5rem; cursor:pointer;">
          <input type="checkbox" id="hide-stopwords" checked style="accent-color:#0066cc;">
          <span>Yaygın kelimeleri gizle</span>
        </label>
        
        <select id="word-count" style="padding:0.4rem 0.75rem; border:1px solid #e5e7eb; border-radius:4px; background:#f8f9fa;">
          <option value="30">İlk 30</option>
          <option value="50">İlk 50</option>
          <option value="100">İlk 100</option>
        </select>
      </div>
    </div>
    
    <!-- Visualization container -->
    <div class="viz-container">
      <!-- Chart view (default) -->
      <div id="word-view" class="viz-view active">
        {% include author-top-words.html
          author_slug=page.author_slug
          top_n=30
          hide_stopwords=true
          normalize="percent" %}
      </div>
    </div>
  </section>
  
  <!-- Language insights section -->
  <!-- <section style="margin:2rem 0; padding:1.5rem; background:#fff; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.05);">
    <h2 style="margin-top:0; display:flex; align-items:center; gap:0.5rem;">
      <i class="fas fa-lightbulb" style="color:#0066cc;"></i>
      Dil Kullanım Özellikleri
    </h2>
    
    <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(250px, 1fr)); gap:1.25rem; margin-top:1.5rem;"> -->
      <!-- Average word length -->
      <!-- <div style="background:#f8f9fa; border:1px solid #e5e7eb; border-radius:8px; padding:1.25rem; display:flex; align-items:center; gap:1rem;">
        <div style="width:50px; height:50px; border-radius:50%; background:#e6f0ff; display:flex; align-items:center; justify-content:center;">
          <i class="fas fa-ruler" style="color:#0066cc; font-size:1.25rem;"></i>
        </div>
        <div>
          <h3 style="margin:0 0 0.25rem 0; font-size:1rem;">Ortalama Kelime Uzunluğu</h3>
          <div id="avg-word-length" style="font-size:1.25rem; font-weight:600; color:#0066cc;">Hesaplanıyor...</div>
        </div>
      </div> -->
      
      <!-- Lexical diversity -->
      <!-- <div style="background:#f8f9fa; border:1px solid #e5e7eb; border-radius:8px; padding:1.25rem; display:flex; align-items:center; gap:1rem;">
        <div style="width:50px; height:50px; border-radius:50%; background:#e6f0ff; display:flex; align-items:center; justify-content:center;">
          <i class="fas fa-fingerprint" style="color:#0066cc; font-size:1.25rem;"></i>
        </div>
        <div>
          <h3 style="margin:0 0 0.25rem 0; font-size:1rem;">Kelime Çeşitliliği</h3>
          <div id="lexical-diversity" style="font-size:1.25rem; font-weight:600; color:#0066cc;">Hesaplanıyor...</div>
        </div>
      </div> -->
      
      <!-- Signature words -->
      <!-- <div style="background:#f8f9fa; border:1px solid #e5e7eb; border-radius:8px; padding:1.25rem; display:flex; align-items:center; gap:1rem;">
        <div style="width:50px; height:50px; border-radius:50%; background:#e6f0ff; display:flex; align-items:center; justify-content:center;">
          <i class="fas fa-signature" style="color:#0066cc; font-size:1.25rem;"></i>
        </div>
        <div>
          <h3 style="margin:0 0 0.25rem 0; font-size:1rem;">Karakteristik Kelimeler</h3>
          <div id="signature-words" style="font-size:1.25rem; font-weight:600; color:#0066cc;">Hesaplanıyor...</div>
        </div>
      </div>
    </div>
  </section> -->
</article>

<!-- Add JavaScript for interactivity -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize tabs
    const chartTab = document.getElementById('tab-chart');
    const tableTab = document.getElementById('tab-table');
    const chartView = document.getElementById('chart-view');
    const tableView = document.getElementById('table-view');
    
    chartTab.addEventListener('click', function() {
      chartTab.classList.add('active');
      tableTab.classList.remove('active');
      chartView.style.display = 'block';
      tableView.style.display = 'none';
    });
    
    tableTab.addEventListener('click', function() {
      tableTab.classList.add('active');
      chartTab.classList.remove('active');
      tableView.style.display = 'block';
      chartView.style.display = 'none';
      
      // Load table data if not already loaded
      if (!tableView.querySelector('tr td:not([colspan])')) {
        loadTableData();
      }
    });
    
    // Style the active tab
    document.querySelectorAll('.viz-tab').forEach(tab => {
      if (tab.classList.contains('active')) {
        tab.style.backgroundColor = '#0066cc';
        tab.style.color = '#fff';
      } else {
        tab.style.backgroundColor = '#f8f9fa';
        tab.style.color = '#333';
      }
      
      tab.addEventListener('click', function() {
        document.querySelectorAll('.viz-tab').forEach(t => {
          if (t.classList.contains('active')) {
            t.style.backgroundColor = '#0066cc';
            t.style.color = '#fff';
          } else {
            t.style.backgroundColor = '#f8f9fa';
            t.style.color = '#333';
          }
        });
      });
    });
    
    // Initialize word count selector
    const wordCountSelect = document.getElementById('word-count');
    if (wordCountSelect) {
      wordCountSelect.addEventListener('change', function() {
        updateVisualization(this.value, document.getElementById('hide-stopwords').checked);
      });
    }
    
    // Initialize stopwords toggle
    const stopwordsToggle = document.getElementById('hide-stopwords');
    if (stopwordsToggle) {
      stopwordsToggle.addEventListener('change', function() {
        updateVisualization(wordCountSelect.value, this.checked);
      });
    }
    
    // Calculate language insights
    calculateInsights();
  });
  
  // Load table data from the chart data
  function loadTableData() {
    const tableBody = document.getElementById('word-table-body');
    
    // Try to get data from the global variable (populated by the include)
    if (window.authorWordData && window.authorWordData.length > 0) {
      let tableContent = '';
      window.authorWordData.forEach((item, index) => {
        tableContent += `
          <tr style="border-bottom:1px solid #e5e7eb;">
            <td style="padding:0.75rem;">${index + 1}</td>
            <td style="padding:0.75rem; font-weight:500;">${item.word}</td>
            <td style="padding:0.75rem; text-align:right;">${item.count.toLocaleString()}</td>
            <td style="padding:0.75rem; text-align:right;">${item.percentage.toFixed(2)}%</td>
          </tr>
        `;
      });
      tableBody.innerHTML = tableContent;
    } else {
      // If no data is available, show a message
      tableBody.innerHTML = `
        <tr>
          <td colspan="4" style="padding:2rem; text-align:center; color:#666;">
            Veri bulunamadı veya henüz yüklenmedi.
          </td>
        </tr>
      `;
    }
  }
  
  // Update visualization based on user selections
  function updateVisualization(wordCount, hideStopwords) {
    // This would update the visualization with new parameters
    // In a real implementation, you would call the appropriate update methods
    // For now, we'll just log the change
    console.log(`Updating visualization: top_n=${wordCount}, hide_stopwords=${hideStopwords}`);
    
    // If we have access to the Plotly chart
    if (window.authorChart && typeof Plotly !== 'undefined') {
      // Update the chart with new data
      // This assumes the chart data is accessible and can be filtered
      try {
        // Example of how you might update the chart
        // This would need to be customized based on how your data is structured
        const filteredData = filterWordData(window.authorWordData, parseInt(wordCount), hideStopwords);
        
        Plotly.update('author-chart', {
          x: [filteredData.map(item => item.word)],
          y: [filteredData.map(item => item.percentage)]
        });
        
        // Also update the table if it's visible
        if (document.getElementById('table-view').style.display !== 'none') {
          loadTableData();
        }
      } catch (e) {
        console.error('Error updating chart:', e);
      }
    }
  }
  
  // Filter word data based on user selections
  function filterWordData(data, topN, hideStopwords) {
    if (!data || !Array.isArray(data)) return [];
    
    // Clone the data to avoid modifying the original
    let filteredData = [...data];
    
    // Filter out stopwords if requested
    if (hideStopwords) {
      // This is a simplified list of Turkish stopwords
      const stopwords = ['ve', 'ile', 'bir', 'bu', 'için', 'da', 'de', 'ki', 'o', 'ben', 'sen', 'o', 'biz', 'siz', 'onlar'];
      filteredData = filteredData.filter(item => !stopwords.includes(item.word.toLowerCase()));
    }
    
    // Return only the top N items
    return filteredData.slice(0, topN);
  }
  
  // Calculate language insights based on the author's data
  function calculateInsights() {
    // Get author data
    const authorSlug = '{{ page.author_slug }}';
    
    // In a real implementation, you would calculate these values from the actual data
    // For now, we'll use placeholder values or try to calculate from available data
    
    // Try to get word data from the global variable
    const wordData = window.authorWordData || [];
    
    if (wordData.length > 0) {
      // Calculate average word length
      let totalLength = 0;
      let totalWords = 0;
      
      wordData.forEach(item => {
        totalLength += item.word.length * item.count;
        totalWords += item.count;
      });
      
      const avgLength = totalLength / totalWords;
      document.getElementById('avg-word-length').textContent = avgLength.toFixed(1) + ' harf';
      
      // Calculate lexical diversity (unique words / total words)
      const uniqueWords = wordData.length;
      const diversity = uniqueWords / totalWords;
      document.getElementById('lexical-diversity').textContent = diversity.toFixed(2);
      
      // Find signature words (words with high frequency but not common in general Turkish)
      // For demo, just use the top 3 words that aren't common stopwords
      const stopwords = ['ve', 'ile', 'bir', 'bu', 'için', 'da', 'de', 'ki', 'o', 'ben', 'sen', 'o', 'biz', 'siz', 'onlar'];
      const signatureWords = wordData
        .filter(item => !stopwords.includes(item.word.toLowerCase()))
        .slice(0, 3)
        .map(item => item.word);
      
      document.getElementById('signature-words').textContent = signatureWords.join(', ');
    } else {
      // Use placeholder values if no data is available
      document.getElementById('avg-word-length').textContent = '5.8 harf';
      document.getElementById('lexical-diversity').textContent = '0.32';
      document.getElementById('signature-words').textContent = 'kelime1, kelime2, kelime3';
    }
  }
  
  // Share functionality
  function shareAuthor(platform) {
    const url = window.location.href;
    const title = '{{ page.title }}';
    
    let shareUrl;
    switch(platform) {
      case 'twitter':
        shareUrl = `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(title)}`;
        break;
      case 'facebook':
        shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
        break;
      case 'linkedin':
        shareUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`;
        break;
    }
    
    window.open(shareUrl, '_blank', 'width=600,height=400');
  }
</script>
